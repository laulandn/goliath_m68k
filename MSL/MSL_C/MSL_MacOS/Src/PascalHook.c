/*  Metrowerks Standard Library  *//*  $Date: 1999/05/07 19:02:22 $  *  $Revision: 1.3 $  *  $NoKeywords: $  * *		Copyright © 1995-1999 Metrowerks, Inc. *		All rights reserved. */ #include "buffer_io.h"#include "char_io.h"#include <stdio.h>#include <string.h>#include "PascalHook.h"#include <MacMemory.h>/*	Write to output ...*/pascal void _WS_B(short value, long align){	if (align == -1)		if (value)			printf(" TRUE");		else			printf("FALSE");	else {		if (value)			printf("%*s",align," TRUE");		else			printf("%*s",align,"FALSE");	}	fflush(stdout);}pascal void _WS_C(short value, long align){	char fString[256];	if (align == -1)		printf("%c", value);	else {		sprintf(fString, "%%%ldc", align);		printf(fString, value);	}	fflush(stdout);}#if powercpascal void _WS_SGL(float value, long align, long precision){	char fString[256];		if (align == -1) { /*	we can assume that precision is also -1*/		printf("%10f", value);	} else {		if (precision == -1) {			sprintf(fString, "%%%ldf", align);		} else { /*	both values exist ...*/			sprintf(fString, "%%%ld.%lde", align, precision);		}		printf(fString, value);	}	fflush(stdout);}pascal void _WS_XTND(double value, long align, long precision){	char fString[256];		if (align == -1) { /*	we can assume that precision is also -1*/		printf("%10f", value);	} else {		if (precision == -1) {			sprintf(fString, "%%%ldf", align);		} else { /*	both values exist ...*/			sprintf(fString, "%%%ld.%lde", align, precision);		}		printf(fString, value);	}	fflush(stdout);}#elsepascal void _WS_XTND(long double *value, long align, long precision){	char fString[256];		if (align == -1) { /*	we can assume that precision is also -1*/		printf("%10f", *value);	} else {		if (precision == -1) {			sprintf(fString, "%%%ldf", align);		} else { /*	both values exist ...*/			sprintf(fString, "%%%ld.%lde", align, precision);		}		printf(fString, *value);	}	fflush(stdout);}#endifpascal void _WS_I(long value, long align){	char fString[256];		if (align == -1)		printf("%8ld", value);	else {		sprintf(fString, "%%%ldld", align);		printf(fString, value);	}	fflush(stdout);	}pascal void _WS_LN(void){	printf("\n");}pascal void _WS_STR(char *value, long align){/*MA - Fix Length bug*/	char fString[256];		if (align == -1)		printf("%#s", value);	else {		sprintf(fString, "%%#%lds", align);		printf(fString, value);	}	fflush(stdout);}pascal void _WS_PAOC(char *value, short size, long align){/*MA - Fix Length bug*/	char fString[256];	char locstr[256];		BlockMove(value, locstr, size);	locstr[size] = '\0';	if (align == -1)		printf("%s", locstr);	else {		sprintf(fString, "%%%lds", align);		printf(fString, locstr);	}	fflush(stdout);}/*	Reading in from console ...*/#if powercpascal void _RS_C(char *value)#elsepascal void _RS_C(short *value)#endif{	char c;	c = getchar();	if (c == '\r' || c == '\n')		c = ' ';	*value = c;}static void flusheoln ( void )/*//	Flush eoln read to terminate screen i/o.*/{	if (__ungotten(stdin) == '\n')		fgetc(stdin);}pascal void _RS_SGL(float *value){	scanf("%e", value);	flusheoln();}pascal void _RS_DBL(double *value){	scanf("%le", value);	flusheoln();}pascal void _RS_XTND(long double *value){	long double theValue;	scanf("%Le", &theValue);	*value = theValue;		flusheoln();}pascal void _RS_IL(long *value){	scanf("%ld", value);	flusheoln();}pascal void _RS_IS(short *value){#if powerclong x;	scanf("%d", &x);	*value = x;#else	scanf("%d", value);#endif	flusheoln();}pascal void _RS_LN(void){	fflush(stdin);}pascal void _RS_STR(char *value){	gets(&value[1]);	value[0] = strlen(&value[1]);}pascal void _RS_PAOC(char *value, short size){char temp[256];	gets(temp);	BlockMove(temp, value, size);}/*     Change record//	93/12/08		MA	_WS_STR: Fixed length of output string.//////	93/12/09		BB	_RS_STR:Changed the scanf for a gets//					BB	Removed _S_OPEN and _S_CLOSE////	93/12/18		MA	flusheoln: strip the <CR> appended to the input buffer.////	94/01/30		MA	_WS_B: write boolean////	94/02/09		MA	_WS_PAOC, _RS_PAOC: writing and reading packed arrays of chars.////	94/04/01		MA  changed extended to long double for PPC.////	94/04/28		MA  eliminated unused var in _WS_B.////	94/06/14		MA  WS_STR: make input string's length unsigned.////	94/07/19		GRS	WS_STR: fix str length prob*/