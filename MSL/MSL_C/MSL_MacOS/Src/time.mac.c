/*  Metrowerks Standard Library  *//*  $Date: 2000/01/28 16:56:17 $  *  $Revision: 1.3.10.1 $  *  $NoKeywords: $  * *		Copyright © 1995-1999 Metrowerks, Inc. *		All rights reserved. *//* *	time.mac.c *	 *	Routines *	-------- *		__get_clock *		__get_time * *		__to_gm_time * * */#include <timesize.mac.h>#if defined(__TIMESIZE_DOUBLE__)#include <Timer.h> 		/*  971222  jz  Increase clock resolution */#else#include <Events.h>#include <OSUtils.h>#endif  /* __TIMESIZE_DOUBLE__ */#include <time.h>#include <time.mac.h>                   /* mm970521 */clock_t __get_clock(void){#if  defined(__TIMESIZE_DOUBLE__)	/*  971222  jz	    The following implementation contributed by Jay Zipnick to increase	    the time resolution of the microsecond clock.  Note that the return	    type of this function has changed (see time.h) from unsigned long to	    double.	 */	     /*  Get a high resolution time stamp  */    UnsignedWide microseconds;    Microseconds(&microseconds);        /* Convert to appropriate type in the floating point domain */    return(microseconds.hi * 4294967296.0 + microseconds.lo);    #else        return(TickCount());    #endif  /*  __TIMESIZE_DOUBLE__ */   }time_t __get_time(void){	unsigned long	time;		GetDateTime(&time);		time -= _mac_msl_epoch_offset_;	/* seconds between 1/1/1904 and 1/1/1970   mm970521 */ /* mm 000127 */		return(time);}int __to_gm_time(time_t * time){	MachineLocation	loc;	long						delta;	ReadLocation(&loc);		if (loc.latitude == 0 && loc.longitude == 0 && loc.u.gmtDelta == 0)		return(0);		delta = loc.u.gmtDelta & 0x00FFFFFF;		if (delta & 0x00800000)		delta |= 0xFF000000;		*time -= delta;		return(1);}/*  Change Record *	03-Oct-95 JFH  First code release. *	12-Oct-95 JFH  Added #include of <Events.h> for TickCount() (in case *								 MacHeaders not included) *  mm970521  made use of _mac_unix_epoch_offset_. *  971222  jz  Increase accuracy of microsecond clock *  mm 990203	Corrected name of epoch conversion constant *  mm 000127   Changed Mac epoch to 1970Jan01 to accord with POSIX and MSL on Windows. MW07637*/