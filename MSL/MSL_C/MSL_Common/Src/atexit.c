#include <cstdlib>#include <critical_regions.h>#define max_funcs	64 void (*_atexit_funcs[max_funcs])(void);long	_atexit_curr_func=0;/*static void (*__atexit_funcs[max_funcs])(void);static long	__atexit_curr_func = 0;*/int __atexit(void (*func)(void));int atexit(void (*func)(void)){		if (_atexit_curr_func == max_funcs)		return(-1);	__begin_critical_region(atexit_funcs_access);	/* 961218 KO */	/*	__setup_exit(); */		_atexit_funcs[_atexit_curr_func++] = func;		__end_critical_region(atexit_funcs_access);	return(0);}/*int __atexit(void (*func)(void)){		if (__atexit_curr_func == max_funcs)		return(-1);	__begin_critical_region(atexit_funcs_access);			// __setup_exit(); 		__atexit_funcs[__atexit_curr_func++] = func;		__end_critical_region(atexit_funcs_access);		return(0);}*/